> Thread pool là một nhóm các thread được tái sử dụng để thực thi nhiều task, vì thế một thread có thể thực thi các task khác nhau.
> 	- Tạo mới một Thread tốn tài nguyên (performance overhead) hơn là tái sử dụng Thread.
> 	- Dễ quản lý số lượng thread chạy tại một thời điểm.

## How thread pool work

Thay vì tạo mới Thread cho mỗi Task, lúc này Task được pass vào Thread Pool.
![[Pasted image 20241218151241.png]]
1. Các task được chèn vào Blocking Queue nơi mà các Thread trong pool sẽ lấy về (dequeue) thực thi.
2. Các Thread nhàn rỗi trong Pool sẽ bị chặn và chờ xử lý các task khác.

## ExecutorService

### Execute Runnable
`executorService.execute(Runnable)`
- ExecutorService nhận Runnable và thực thi bất đồng bộ.
- Không thể nhận kết quả trả về.
### Submit Runnable
`executorService.submit(Runnable)`
- Nhận vào triển khai Runnable và thực thi bất đồng bộ.
- Trả về Future, có thể sử dụng để kiểm tra trạng thái hoàn thành của task `future.get() == null`
### Submit Callable
`executorService.submit(Callable)`
- Trả về Future
- Kết quả có thể được lấy ra từ Future.get()
### invokeAny()
`executorService.invokeAny(Collection<? extends Callable<T>>)`
- Nhận vào danh sách các Callable
- Trả về một kết quả của một trong số danh sách Callable
- Nếu một Callable kết thúc, kết quả được trả về. Các Callable còn lại bị hủy bỏ.
### invokeAll()
`executorService.invokeAl(Collection<? extends Callable<T>)`
- Nhận vào danh sách các Callable
- Thực thi tất cả các Callable nhận vào.
- Trả về tập hợp Future là kết quả thực thi của các Tasks.
- Có thể có 1 số task kết thúc do exception.
### Runnable vs Callable
